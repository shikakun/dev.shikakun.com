<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width" name="viewport">
    
    <title>Pull request でごはんにカレーをかける · dev.shikakun.com</title>
    <meta name="description" content="僕が働いている 会社 では、今期の目標や実績などの評価資料を Markdown で書いて、GitHub Enterprise の規定のリポジトリに pull request を送ることで管理しています（エンジニアだけでなく、デザイナーや、一部の部署ではマネージャーやディレクターも pull request で提出している一風変わった会社です）。どうしてこんなことをしているのかは CTO の記事 を">
<meta property="og:type" content="article">
<meta property="og:title" content="Pull request でごはんにカレーをかける">
<meta property="og:url" content="http://dev.shikakun.com/post/pull-request-ascii-art/index.html">
<meta property="og:site_name" content="dev.shikakun.com">
<meta property="og:description" content="僕が働いている 会社 では、今期の目標や実績などの評価資料を Markdown で書いて、GitHub Enterprise の規定のリポジトリに pull request を送ることで管理しています（エンジニアだけでなく、デザイナーや、一部の部署ではマネージャーやディレクターも pull request で提出している一風変わった会社です）。どうしてこんなことをしているのかは CTO の記事 を">
<meta property="og:image" content="http://dev.shikakun.com/post/pull-request-ascii-art/capture_commit_a.png">
<meta property="og:image" content="http://dev.shikakun.com/post/pull-request-ascii-art/capture_commit_b.png">
<meta property="og:image" content="http://dev.shikakun.com/post/pull-request-ascii-art/capture_commit_c.png">
<meta property="og:image" content="http://dev.shikakun.com/post/pull-request-ascii-art/capture_photoshop.png">
<meta property="og:image" content="http://dev.shikakun.com/post/pull-request-ascii-art/capture_commit_d.png">
<meta property="og:updated_time" content="2015-08-14T03:01:47.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pull request でごはんにカレーをかける">
<meta name="twitter:description" content="僕が働いている 会社 では、今期の目標や実績などの評価資料を Markdown で書いて、GitHub Enterprise の規定のリポジトリに pull request を送ることで管理しています（エンジニアだけでなく、デザイナーや、一部の部署ではマネージャーやディレクターも pull request で提出している一風変わった会社です）。どうしてこんなことをしているのかは CTO の記事 を">
    
      <link rel="alternative" href="/atom.xml" title="dev.shikakun.com" type="application/atom+xml">
    
    
    <link rel="stylesheet" href="/stylesheets/style.css" type="text/css">
    
      <!-- Google Analytics -->
      <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-20528252-12', 'auto');
      ga('send', 'pageview');
      </script>
      <!-- End Google Analytics -->
    
  </head>
  <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.4";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <script type="text/javascript" src="//media.line.me/js/line-button.js?v=20140411"></script>
    <header id="header" class="header">
      <h1 class="header__nav header__nav--brand">
        <a href="/">dev.shikakun.com</a>
      </h1>
      <nav class="header__nav header__nav--archive">
        <a href="/archives/">Archives</a>
      </nav>
    </header>
    <div class="page">
      <article class="article" id="post-pull-request-ascii-art" itemscope itemprop="blogPost">
  
    <header class="article__header">
      
  <h1 class="article__heading" itemprop="name">
    <a href="/post/pull-request-ascii-art/">Pull request でごはんにカレーをかける</a>
  </h1>


      
  <a class="article__date" href="/post/pull-request-ascii-art/">
    <time datetime="2015-08-14T01:10:54.000Z" itemprop="datePublished">Aug 14, 2015</time>
  </a>


    </header>
  
  
    <div class="article__body" itemprop="articleBody">
      <p>僕が働いている <a href="http://pepabo.com/recruit2016/shikakun" target="_blank" rel="external">会社</a> では、今期の目標や実績などの評価資料を Markdown で書いて、GitHub Enterprise の規定のリポジトリに pull request を送ることで管理しています（エンジニアだけでなく、デザイナーや、一部の部署ではマネージャーやディレクターも pull request で提出している一風変わった会社です）。どうしてこんなことをしているのかは <a href="http://blog.kentarok.org/entry/2014/04/27/220231" target="_blank" rel="external">CTO の記事</a> を参照いただければと思いますが、僕はデザイナーだし pull request も自己アピールの場だなと思って、コミットメッセージで絵を描くことにしました。</p>
<ul>
<li><a href="http://www.figlet.org/" target="_blank" rel="external">FIGlet</a></li>
</ul>
<p>FIGlet は文字をアスキーアートへ変換するツールです。コマンドラインで実行できるので、開発環境ごとに ssh ログインしたときに違うアスキーアートを表示させるようにしておくと、ログインしたサーバーを区別できて便利ですね。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">$ brew install figlet&#10;$ figlet shikakun&#10;     _     _ _         _&#10; ___| |__ (_) | ____ _| | ___   _ _ __&#10;/ __| &#39;_ \| | |/ / _` | |/ / | | | &#39;_ \&#10;\__ \ | | | |   &#60; (_| |   &#60;| |_| | | | |&#10;|___/_| |_|_|_|\_\__,_|_|\_\\__,_|_| |_|</span><br></pre></td></tr></table></figure>
<p>さっそく僕のインターネットでの通り名の「shikakun」をアスキーアート化して、上から1行ずつ空コミットしてみました。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">$ git commit --allow-empty -m &#39;     _     _ _         _&#39;&#10;$ git commit --allow-empty -m &#39; ___| |__ (_) | ____ _| | ___   _ _ __&#39;&#10;$ git commit --allow-empty -m &#39;/ __| &#39;_ \| | |/ / _` | |/ / | | | &#39;_ \&#39;&#10;$ git commit --allow-empty -m &#39;\__ \ | | | |   &#60; (_| |   &#60;| |_| | | | |&#39;&#10;$ git commit --allow-empty -m &#39;|___/_| |_|_|_|\_\__,_|_|\_\\__,_|_| |_|&#39;</span><br></pre></td></tr></table></figure>
<p>おもむろに push すると！</p>
<img src="/post/pull-request-ascii-art/capture_commit_a.png" alt="capture_commit_a.png" title="">
<p>あれ…</p>
<p>残念なことに、GitHub の仕様上、コミットメッセージに半角スペースが連続すると省略されてしまうようです。これでは思うような表現ができません。</p>
<img src="/post/pull-request-ascii-art/capture_commit_b.png" alt="capture_commit_b.png" title="">
<p>全角スペースも試してみましたが、環境や書体によっては意図した表示にならないことがわかりました。しかし、ここでひらめきました。スペースがダメなら、空白を意味する文字を挿入すればいいじゃないか。また、思い通りの書体で表示されないなら、どの環境でも同じ見た目の絵文字で表示すればいいじゃないか！幸い GitHub はコミットメッセージに :emoji: と書くと絵文字へ置換してくれる機能があります。</p>
<img src="/post/pull-request-ascii-art/capture_commit_c.png" alt="capture_commit_c.png" title="">
<p>できた！</p>
<p>FIGlet では文字2種類を指定してアスキーアートを描く機能はないので、Photoshop で 28px × 28px（GitHub の pull request の画面でコミットメッセージの幅が最大 28 絵文字ぶんのため）のカンバスを用意してドット絵を用意しました。</p>
<img src="/post/pull-request-ascii-art/capture_photoshop.png" alt="capture_photoshop.png" title="">
<p>完成したドット絵を見ながら、上から 1px ごとに塗られているかどうかで 0 と 1 を入力していきます…。このあたりを自動化する便利なツールないかなぁ。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">0000000000000111000000000000&#10;0000000000000111000000000000&#10;0001111111111111111111111110&#10;0001111111111111111111111110&#10;0001100000110000011000000000&#10;0001100000110000011000000000&#10;0001100000110000011000000000&#10;0001111111111111111111111100&#10;0001111111111111111111111100&#10;0001100000110000011000001100&#10;0001100000110000011000001100&#10;0001100000110000011000001100&#10;0001100000110000011000001100&#10;0001111111111111111111111100&#10;0001111111111111111111111100&#10;0001100000000000000000000000&#10;0001100011000000011000000000&#10;0001100011000000011000001100&#10;0001000011111110011001111110&#10;0011000011111110011111111100&#10;0011000011000000011111000000&#10;0011000011000000011000000000&#10;0011000011000000011000000010&#10;0111000011001110011000000011&#10;0110111111111110011000000011&#10;1110011111111110011111111110&#10;0010011110000000001111111110</span><br></pre></td></tr></table></figure>
<p>アスキーアートができたら、1行ずつ絵文字に置換してコミットしていくのはめんどうなので、以下のような Rakefile を書きました。</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">'rake'</span></span><br><span class="line"></span><br><span class="line"><span class="variable">@messages</span> = [</span><br><span class="line">  <span class="string">'0000000000000111000000000000'</span>,</span><br><span class="line">  <span class="string">'0000000000000111000000000000'</span>,</span><br><span class="line">  <span class="string">'0001111111111111111111111110'</span>,</span><br><span class="line">  <span class="string">'0001111111111111111111111110'</span>,</span><br><span class="line">  <span class="string">'0001100000110000011000000000'</span>,</span><br><span class="line">  <span class="string">'0001100000110000011000000000'</span>,</span><br><span class="line">  <span class="string">'0001100000110000011000000000'</span>,</span><br><span class="line">  <span class="string">'0001111111111111111111111100'</span>,</span><br><span class="line">  <span class="string">'0001111111111111111111111100'</span>,</span><br><span class="line">  <span class="string">'0001100000110000011000001100'</span>,</span><br><span class="line">  <span class="string">'0001100000110000011000001100'</span>,</span><br><span class="line">  <span class="string">'0001100000110000011000001100'</span>,</span><br><span class="line">  <span class="string">'0001100000110000011000001100'</span>,</span><br><span class="line">  <span class="string">'0001111111111111111111111100'</span>,</span><br><span class="line">  <span class="string">'0001111111111111111111111100'</span>,</span><br><span class="line">  <span class="string">'0001100000000000000000000000'</span>,</span><br><span class="line">  <span class="string">'0001100011000000011000000000'</span>,</span><br><span class="line">  <span class="string">'0001100011000000011000001100'</span>,</span><br><span class="line">  <span class="string">'0001000011111110011001111110'</span>,</span><br><span class="line">  <span class="string">'0011000011111110011111111100'</span>,</span><br><span class="line">  <span class="string">'0011000011000000011111000000'</span>,</span><br><span class="line">  <span class="string">'0011000011000000011000000000'</span>,</span><br><span class="line">  <span class="string">'0011000011000000011000000010'</span>,</span><br><span class="line">  <span class="string">'0111000011001110011000000011'</span>,</span><br><span class="line">  <span class="string">'0110111111111110011000000011'</span>,</span><br><span class="line">  <span class="string">'1110011111111110011111111110'</span>,</span><br><span class="line">  <span class="string">'0010011110000000001111111110'</span></span><br><span class="line">]</span><br><span class="line"><span class="variable">@emoji_zero</span> = <span class="string">':rice:'</span></span><br><span class="line"><span class="variable">@emoji_one</span> = <span class="string">':curry:'</span></span><br><span class="line"></span><br><span class="line">task <span class="symbol">:commit</span> <span class="keyword">do</span></span><br><span class="line">  <span class="variable">@messages</span>.each <span class="keyword">do</span> |message|</span><br><span class="line">    message.gsub!(<span class="regexp">/0/</span>, <span class="variable">@emoji_zero</span>)</span><br><span class="line">    message.gsub!(<span class="regexp">/1/</span>, <span class="variable">@emoji_one</span>)</span><br><span class="line">    <span class="string">`git commit --allow-empty -m <span class="subst">#&#123;message&#125;</span>`</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  puts <span class="string">'commit complete successfully!'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">task <span class="symbol">:default</span> =&gt; <span class="symbol">:commit</span></span><br></pre></td></tr></table></figure>
<p>好きな絵文字に置換できるので、0 と 1 をごはんにカレーがかかってるかどうかで表現することにしました。</p>
<table><tr><th>0</th><td>:rice:</td></tr><tr><th>1</th><td>:curry:</td></tr></table>

<p>実行すると！</p>
<img src="/post/pull-request-ascii-art/capture_commit_d.png" alt="capture_commit_d.png" title="">
<p>やった〜。</p>
<p>もちろん業務時間中にはこんなことやってませんが、こんな評価資料を提出しても「インターネットが好きで好きでたまらないという気持ちが溢れでています。」とコメントしてもらえて、楽しい会社だなぁと思いました。</p>

    </div>
  
  
    <div class="share">
      <ul class="share__list">
        <li class="share__item share__item--twitter">
          <a href="https://twitter.com/share" class="twitter-share-button" data-count="vertical" data-url="http://dev.shikakun.com/post/pull-request-ascii-art/" data-text="Pull request でごはんにカレーをかける" data-lang="ja">Tweet</a>
        </li>
        <li class="share__item share__item--facebook">
          <div class="fb-like" data-href="http://dev.shikakun.com/post/pull-request-ascii-art/" data-layout="box_count" data-action="like" data-show-faces="false" data-share="false"></div>
        </li>
        <li class="share__item share__item--google-plus">
          <g:plusone size="tall" href="http://dev.shikakun.com/post/pull-request-ascii-art/"></g:plusone>
        </li>
        <li class="share__item share__item--hatena-bookmark">
          <a href="http://b.hatena.ne.jp/entry/http://dev.shikakun.com/post/pull-request-ascii-art/" class="hatena-bookmark-button" data-hatena-bookmark-layout="vertical-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="//b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>
        </li>
      </ul>
    </div>
    
  <div class="next-article-nav">
    <a href="/post/button-stylesheet-reading/">
      <span class="next-article-nav__label">
        次の記事
      </span>
      <span class="next-article-nav__heading">
        CSS フレームワークのボタンのスタイルシート読書会
      </span>
    </a>
  </div>


  
</article>


    </div>
    <footer class="footer">
      <ul class="footer__account">
        <li class="footer__account-list footer__account-list--twitter">
          <a href="https://twitter.com/shikakun" target="_blank">
            Twitter
          </a>
        </li>
        <li class="footer__account-list footer__account-list--contact">
          <a href="https://github.com/shikakun/dev.shikakun.com/issues/new?labels=お問い合わせ&amp;title=「Pull request でごはんにカレーをかける」について&amp;body=内容は公開されます。ご了承ください。" target="_blank">
            Contact
          </a>
        </li>
      </ul>
      <a class="footer__pagetop" href="#header"></a>
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="/javascripts/script.js" type="text/javascript"></script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    <script type="text/javascript" src="//apis.google.com/js/plusone.js" async="async"></script>
    <script type="text/javascript" src="//b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
  </body>
</html>
