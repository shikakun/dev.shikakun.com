title: Pull request でごはんにカレーをかける
date: 2015-08-14 10:10:54
tags:
---

僕が働いている [会社](http://pepabo.com/recruit2016/shikakun) では、今期の目標や実績などの評価資料を Markdown で書いて、GitHub Enterprise の規定のリポジトリに pull request を送ることで管理しています（エンジニアだけでなく、デザイナーや、一部の部署ではマネージャーやディレクターも pull request で提出している一風変わった会社です）。どうしてこんなことをしているのかは [CTO の方の記事](http://blog.kentarok.org/entry/2014/04/27/220231) を参照いただければと思いますが、僕はデザイナーだし pull request も自己アピールの場だなと思って、コミットメッセージで絵を描くことにしました。

FIGlet は文字をアスキーアートに変換するツールです。コマンドラインで実行できるので、開発環境ごとに ssh ログインしたときに違うアスキーアートを表示させるようにしておくと、ログインしたサーバーを区別できて便利ですね。

* [FIGlet](http://www.figlet.org/)

さっそく僕のインターネットでの通り名の「shikakun」をアスキーアート化して、上から1行ずつ空コミットしてみました。
おもむろに push すると！

あれ…

残念なことに、Git または GitHub の仕様上、半角スペースが連続すると省略されてしまうようです。これでは思うような表現ができません。

全角スペースも試してみましたが、環境や書体によっては意図した表示にならないことがわかりました。しかし、ここでひらめきました。スペースがダメなら、別の文字を挿入させればいいじゃないか。また、思い通りの書体で表示されないなら、どの環境でも同じ見た目の絵文字で表示すればいいじゃないか！幸い GitHub はコミットメッセージに :emoji: を描くと絵文字に置換してくれる機能があります。

できた！

FIGlet では文字2種類を指定してアスキーアートを描く機能はないので、Photoshop で 26px × 26px（GitHub の pull request の画面でコミットメッセージの幅が最大26絵文字ぶんのため）のキャンバスを用意してドット絵を用意しました。

完成した絵を見ながら、上から 0 と 1 でアスキーアートへ手動で変換していきます…。
このあたりを自動化する便利なツールないかなぁ。

アスキーアートができたら、26行を1行ずつ絵文字に置換してコミットしていくのはめんどうなので、以下のような rake タスクを書きました。

好きな絵文字に置換できるので、0 と 1 をごはんにカレーがかかってるかどうかで表現することにしました。

<table><tr><th>0</th><td>:rice:</td></tr><tr><th>1</th><td>:curry:</td></tr></table>

rake タスクを実行すると！


やった〜。

もちろん業務時間中にはこんなことやってませんが、こんな評価資料を提出しても「インターネットが好きで好きでたまらないという気持ちが溢れでています。」とコメントしてもらえて、楽しい会社だなぁと思いました。
